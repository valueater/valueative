<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="SMGM 최신 소식 - 친환경 소재 기술 업데이트, 건설신기술 인증, 공공 프로젝트 사례 및 보도자료">
    <title>NEWS | SMGM</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/pages.css">
</head>
<body>
    <div class="sunlight-overlay" aria-hidden="true"></div>
    <header class="header">
        <div class="container">
            <nav class="nav">
                <a href="index.html" class="nav__logo">SM<span class="nav__logo-gm">GM</span></a>
                <div class="nav__mobile-toggle"><span></span><span></span><span></span></div>
                <ul class="nav__menu">
                    <li class="nav__item"><a href="company.html" class="nav__link">COMPANY</a></li>
                    <li class="nav__item"><a href="brand.html" class="nav__link">BRAND</a></li>
                    <li class="nav__item nav__dropdown">
                        <a href="solutions.html" class="nav__link nav__link-with-dropdown">SOLUTION</a>
                        <button class="nav__dropdown-icon" aria-label="Toggle solution menu">
                            <span>▼</span>
                        </button>
                        <ul class="nav__dropdown-menu">
                            <li class="nav__dropdown-item"><a href="solution-soilaroma.html" class="nav__dropdown-link">SoilAroma-G</a></li>
                            <li class="nav__dropdown-item"><a href="solution-ecoride.html" class="nav__dropdown-link">EcoRide-G</a></li>
                            <li class="nav__dropdown-item"><a href="solution-techlane.html" class="nav__dropdown-link">TechLane-G</a></li>
                            <li class="nav__dropdown-item"><a href="solution-ecofield.html" class="nav__dropdown-link">EcoField-G</a></li>
                            <li class="nav__dropdown-item"><a href="solution-gaiacure.html" class="nav__dropdown-link">GaiaCure-G</a></li>
                        </ul>
                    </li>
                    <li class="nav__item"><a href="performance.html" class="nav__link">PERFORMANCE</a></li>
                    <li class="nav__item"><a href="news.html" class="nav__link">NEWS</a></li>
                    <li class="nav__item"><button class="nav__contact-btn open-contact-modal">CONTACT</button></li>
                </ul>
            </nav>
        </div>
    </header>
    
    <main class="main" style="padding-top: var(--header-height);">
        <section class="hero hero--dark">
            <div class="container">
                <h1 class="hero__title">News & Updates</h1>
                <p class="hero__subtitle">SMGM의 최신 소식과 프로젝트 업데이트</p>
            </div>
        </section>
        
        <section class="section">
            <div class="container">
                <div class="news-grid" id="newsGrid">
                    <div class="news-loading" id="newsLoading" style="grid-column: 1 / -1; text-align: center; padding: 60px 20px; color: #888;">
                        불러오는 중...
                    </div>
                </div>
                <div id="newsEmpty" style="display:none; text-align:center; padding: 60px 20px; color: #888;">
                    <p style="font-size: 16px;">등록된 소식이 없습니다.</p>
                </div>
            </div>
        </section>

        <script>
            // 뉴스 동적 로드 (Firebase Firestore)
            document.addEventListener('DOMContentLoaded', function() {
                if (typeof firebase === 'undefined' || !firebase.firestore) return;

                var grid = document.getElementById('newsGrid');
                var loading = document.getElementById('newsLoading');
                var empty = document.getElementById('newsEmpty');

                firebase.firestore().collection('news').orderBy('date', 'desc').get()
                    .then(function(snapshot) {
                        if (loading) loading.remove();

                        if (snapshot.empty) {
                            empty.style.display = 'block';
                            return;
                        }

                        snapshot.forEach(function(doc) {
                            var d = doc.data();
                            var card = document.createElement('div');
                            card.className = 'news-card';

                            if (d.linkUrl) {
                                card.style.cursor = 'pointer';
                                card.addEventListener('click', function() {
                                    window.open(d.linkUrl, '_blank', 'noopener');
                                });
                            }

                            var imgHtml = d.imageUrl
                                ? '<div class="news-card__image" style="background-image:url(\'' + d.imageUrl.replace(/'/g, "\\'") + '\'); background-size:cover; background-position:center;"></div>'
                                : '<div class="news-card__image"></div>';

                            var dateStr = d.date || '';
                            if (dateStr && dateStr.includes('-')) {
                                dateStr = dateStr.replace(/-/g, '.');
                            }

                            card.innerHTML = imgHtml +
                                '<div class="news-card__content">' +
                                    '<span class="news-card__date">' + escapeHtml(dateStr) + '</span>' +
                                    '<h3 class="news-card__title">' + escapeHtml(d.title || '') + '</h3>' +
                                    '<p class="news-card__excerpt">' + escapeHtml(d.excerpt || '') + '</p>' +
                                '</div>';

                            grid.appendChild(card);
                        });
                    })
                    .catch(function(err) {
                        console.error('뉴스 로드 실패:', err);
                        if (loading) loading.textContent = '뉴스를 불러올 수 없습니다.';
                    });

                function escapeHtml(str) {
                    var div = document.createElement('div');
                    div.textContent = str;
                    return div.innerHTML;
                }
            });
        </script>
        
        <section class="section cta-section">
            <div class="container">
                <div class="cta-box">
                    <h2 class="cta__title">더 자세한 정보가 필요하신가요?</h2>
                    <p class="cta__subtitle">SMGM의 솔루션과 프로젝트에 대해 문의해 주세요</p>
                    <button class="btn btn-primary btn-lg open-contact-modal">Touch US</button>
                </div>
            </div>
        </section>
    </main>
    
    <footer class="footer">
        <div class="container">
            <div class="footer__content">
                <div class="footer__logo">SM<span class="footer__logo-gm">GM</span>™</div>
                <p class="footer__tagline">SMGM의 CORElite-G(e)은 지속가능한 지구의 내일에 기여합니다.</p>
            </div>
            <div class="footer__copyright">
                <div class="footer__copyright-row">© 2025 주식회사 에스엠골드마인 (SMGM). All rights reserved. 사업자등록번호: 702-86-03387 | 대표: 박수운</div>
                <div class="footer__legal">All content including text, images, design, and logos are protected by copyright law. Unauthorized reproduction, distribution, or derivative works are strictly prohibited.</div>
            </div>
        </div>
    </footer>
    
    <div id="contactModal" class="modal">
        <div class="modal__content">
            <div class="modal__header">
                <h2 class="modal__title">Contact</h2>
                <span class="modal__close">&times;</span>
            </div>
            <form id="contactForm" class="modal__form">
                <div class="form__group"><label for="name" class="form__label">이름 / 담당자</label><input type="text" id="name" class="form__input" required></div>
                <div class="form__group"><label for="email" class="form__label">이메일</label><input type="email" id="email" class="form__input" required></div>
                <div class="form__group"><label for="phone" class="form__label">연락처</label><input type="tel" id="phone" class="form__input" required></div>
                <div class="form__group">
                    <label for="solution" class="form__label">관심 솔루션</label>
                    <select id="solution" class="form__select" required>
                        <option value="">선택해주세요</option>
                        <option value="SoilAroma-G">SoilAroma-G (흙향기e지)</option>
                        <option value="EcoRide-G">EcoRide-G (에코라이더e지)</option>
                        <option value="TechLane-G">TechLane-G (테크레인e지)</option>
                        <option value="EcoField-G">EcoField-G (에코필드e지)</option>
                        <option value="GaiaCure-G">GaiaCure-G (흙살림e지)</option>
                        <option value="기타">기타</option>
                    </select>
                </div>
                <div class="form__group"><label for="message" class="form__label">문의 내용</label><textarea id="message" class="form__textarea" rows="5" required></textarea><span class="form__placeholder">프로젝트 규모, 예상 일정, 기타 문의사항을 자유롭게 작성해주세요.</span></div>
                <button type="submit" class="form__submit">Touch Us</button>
            </form>
        </div>
    </div>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
    <script src="js/firebase-config.js"></script>
    <script src="js/popup.js"></script>
    <!-- GSAP + ScrollTrigger -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script src="js/anim.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
